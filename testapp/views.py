# views.py

from django.shortcuts import render

# Question class (same as yours)
class Questions:
    def __init__(self, que, a, b, c, d, correct):
        self.que = que
        self.a = a
        self.b = b
        self.c = c
        self.d = d
        self.correct = correct  # yeh 'a', 'b', 'c', 'd' mein se ek hoga

def testpaper(request):
    # Hardcoded questions (you can later move to database)
    questions = [
        Questions('मानव शरीर में कौन-सी ग्रंथि ''मास्टर ग्रंथि'' कहलाती है?',
                  '(a) थायरॉइड', '(b) पिट्यूटरी', '(c) एड्रीनल', '(d) टेस्टिस', 'b'),
        Questions('मस्तिष्क का कौन-सा भाग संतुलन एवं शरीर की स्थिति बनाए रखता है',
                  '(a) सेरीब्रम', '(b) हाइपोथैलेमस', '(c) सेरीबेलम', '(d) मेडुला', 'c'),
        Questions('रिफ्लेक्स क्रिया किसके द्वारा नियंत्रित होती है?',
                  '(a) मस्तिष्क', '(b) मेरुरज्जु', '(c) हृदय', '(d) आँखें', 'b'),
        Questions('निम्न में से कौन-सा पादप हार्मोन फल पकने में सहायक है?',
                  '(a) साइटोकाइनिन', '(b) जिबरेलिन', '(c) एथिलीन', '(d) ऑक्सिन', 'c'),


        Questions('न्यूरॉन एक-दूसरे को संकेत किसके द्वारा भेजते हैं?',
                  '(a) विद्युत संकेत', '(b) रासायनिक संकेत', '(c) दोनों', '(d) कोई नहीं', 'c'),
        Questions('दाब, स्पर्श तथा ठंड की जानकारी मस्तिष्क का कौन-सा भाग संभालता है?',
                  '(a) सेरिब्रलम', '(b) मेडुला', '(c) सेरिबेलम', '(d) पॉंस', 'a'),
        Questions('पादप जड़ों की नीचे की ओर बढ़ने की क्रिया कहलाती है—',
                  '(a) भू-उपगमन', '(b) भू-अनुपगमन', '(c) ज्योति-उपगमन', '(d) स्पर्शानुवर्तन', 'a'),
        Questions('एड्रीनल ग्रंथि किसके ऊपर स्थित होती है?',
                  '(a) यकृत', '(b) गुर्दे', '(c) हृदय', '(d) फेफड़े', 'b'),


        Questions('इंसुलिन किस ग्रंथि द्वारा स्रावित होता है?',
                  '(a) थायरॉयड', '(b) पिट्यूटरी', '(c) अग्न्याशय', '(d) एड्रीनल', 'c'),
        Questions('निम्न में से कौन-सा हार्मोन पौधों में लंबाई बढ़ाता है?',
                  '(a) ऑक्सिन', '(b) जिबरेलिन', '(c) एब्सिसिक', '(d) एथिलीन', 'b'),



        Questions('न्यूरॉन का कौन-सा भाग संदेश प्राप्त करता है?',
                  '(a) एक्सॉन', '(b) डेंड्राइट', '(c) सोमाएन', '(d) माइलिन', 'b'),
        Questions('किस भाग की क्षति से व्यक्ति संतुलन खो सकता है?',
                  '(a) सेरिब्रम', '(b) मेडुला', '(c) सेरिबेलम', '(d) मिडब्रेन', 'c'),
        Questions('मस्तिष्क को ऑक्सीजन युक्त रक्त कौन पहुँचाता है?',
                  '(a) कार्टिक नसें', '(b) कोरोनरी नसें', '(c) कैरोटिड धमनी', '(d) जुगुलर धमनी', 'c'),
        Questions('न्यूरॉन के बीच गैप को कहते हैं—',
                  '(a) गैप्लिया', '(b) सिनेप्स', '(c) एक्सॉन-गैप', '(d) डेंड्राइटिक स्पेस', 'b'),


        Questions('कौन-सी क्रिया अनैच्छिक है?',
                  '(a) दौड़ना', '(b) साँस लेना', '(c) पढ़ना', '(d) लिखना', 'b'),
        Questions('न्यूरॉन में माइलिन शीथ का मुख्य घटक—',
                  '(a) कैल्शियम', '(b) प्रोटीन', '(c) लिपिड', '(d) कार्बोहाइड्रेट', 'c'),
        Questions('पादप में पार्श्विक वृद्धि होती है—',
                  '(a) जड़ के सिरे पर', '(b) तने के सिरे पर', '(c) दोनों a और b', '(d) पत्ती के मध्य भाग', 'c'),


        Questions('मानव मस्तिष्क किसमें सुरक्षित है?',
                  '(a) कश पिंजर', '(b) श्रोणि', '(c) खोपड़ी', '(d) कंधा', 'c'),
        Questions('पौधों में स्पर्शानुवर्तन किस हार्मोन से प्रभावित है?',
                  '(a) जिबरेलिन', '(b) एथिलीन', '(c) ऑक्सिन', '(d) ABA', 'c'),
        Questions('पीनियल ग्रंथि का मुख्य हार्मोन—',
                  '(a) मेलाटोनिन', '(b) एड्रीनलिन', '(c) ग्लूकागॉन', '(d) एस्ट्रोजन', 'a'),



        Questions('निम्न में से कौन-सा संदेशवाहक रासायनिक होता है?',
                  '(a) न्यूरॉन', '(b) हार्मोन', '(c) एक्सॉन', '(d) डेंड्राइट', 'b'),
        Questions('पौधे में कौन-सा भाग गुरुत्वाकर्षण के विरुद्ध बढ़ता है?',
                  '(a) जड़', '(b) फूल', '(c) तना', '(d) फल', 'c'),
        Questions('मध्य मस्तिष्क (Midbrain) मुख्यतः नियंत्रित करता है—',
                  '(a) दृष्टि और श्रवण प्रतिक्रिया', '(b) हृदय गति', '(c) संतुलन', '(d) भाषण', 'a'),



        Questions('रिफ्लेक्स आर्क का पहला भाग है—',
                  '(a) मोटर न्यूरॉन', '(b) संवेदी न्यूरॉन', '(c) रिसेप्टर', '(d) प्रभावक', 'c'),
        Questions('पौधों में ABA हार्मोन की भूमिका—',
                  '(a) बीज उगने में', '(b) वृद्धि रोकने में', '(c) फल पकाने में', '(d) पत्ती फैलाने में', 'b'),
        Questions('थायरॉयड ग्रंथि कहाँ स्थित है?',
                  '(a) पेट', '(b) मस्तिष्क', '(c) गला', '(d) हृदय', 'c'),

    ]

    # Agar form submit hua hai (POST request)
    if request.method == "POST":
        score = 0
        for i, q in enumerate(questions, 1):  # i = 1,2,3,4 (question number)
            selected_option = request.POST.get(f'option{i}')  # name="option1", "option2" etc.
            if selected_option == q.correct:
                score += 1

        total = len(questions)
        percentage = round((score / total) * 100, 1) if total > 0 else 0

        context = {
            'score': score,
            'total': total,
            'percentage': percentage
        }
        return render(request, 'result.html', context)

    # Pehli baar page load hone par (GET request)
    context = {'questions': questions}
    return render(request, 'question.html', context)